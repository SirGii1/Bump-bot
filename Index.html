<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Smart Bumps</title>
  <style>
    :root { --primary1: #00d4ff; --primary2: #0091ff; --accent: #00ff88; --bg: rgba(255,255,255,0.05); }
    body { margin:0; padding:20px; font-family: 'Segoe UI', sans-serif; background:#1a1a2e; color:#fff; transition: background .3s;}
    .container { max-width: 600px; margin:0 auto; background: var(--bg); border-radius:25px; padding:35px; box-shadow:0 30px 60px rgba(0,0,0,0.4); }
    .logo { font-size: 3rem; font-weight:900; background: linear-gradient(135deg, var(--primary1), var(--primary2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-align: center; margin-bottom:15px; }
    h2 { text-align:center; margin-bottom:25px; font-size:2rem; }
    .user-location { text-align:center; font-size:.9rem; color:#aaa; margin-bottom:20px; }
    .step { display:none; animation: slideIn .4s ease-out; }
    .step.active { display:block; }
    @keyframes slideIn { from{opacity:0;transform:translateY(20px);} to{opacity:1;transform:translateY(0);} }
    label { font-weight:600; margin-bottom:6px; display:block; color:#ddd; }
    input[type=text] { width:100%; padding:12px; border:1px solid rgba(255,255,255,0.2); border-radius:8px; background:#222337; color:#fff; margin-bottom:20px; }
    .btn { background:linear-gradient(135deg, var(--primary1), var(--primary2)); color:#fff; padding:14px 28px; font-size:1rem; border:none; border-radius:12px; cursor:pointer; transition:.3s; margin:4px; }
    .btn:hover { transform:translateY(-2px); box-shadow:0 6px 20px rgba(0,145,255,0.3); }
    .btn:disabled { background:#555; cursor:not-allowed; }
    .package-option { margin-bottom:12px; }
    .package-option input { margin-right:8px; }
    .countdown-display { color: var(--accent); font-size:1.8rem; font-weight:900; margin:10px 0; text-align:center; }
    .copyable { background: #222337; padding:12px; border-radius:8px; font-family: monospace; cursor:pointer; text-align:center; position: relative; }
    .copyable::after { content: 'üìã'; position:absolute; right:10px; top:50%; transform:translateY(-50%); }
    .notification { padding:20px; border-radius:12px; margin:20px 0; }
    .notification-info { background:rgba(0,212,255,0.1); border-left:4px solid var(--primary1); color: #00d4ff; }
    .notification-success { background:rgba(0,255,136,0.1); border-left:4px solid var(--accent); color:#00cc6a; }
    .notification-error { background:rgba(220,53,69,0.1); border-left:4px solid #dc3545; color:#dc3545; }
    .step-indicator { display:flex; justify-content:center; margin-bottom:40px; position:relative; }
    .indicator { width:40px;height:40px;border-radius:50%;background:rgba(255,255,255,0.1);display:flex;align-items:center;justify-content:center;margin:0 10px;color:#666;font-weight:bold;transition:.4s;border:2px solid transparent; }
    .indicator.active { background: linear-gradient(135deg, var(--primary1), var(--primary2)); color:#fff; box-shadow:0 0 20px rgba(0,212,255,0.5);}
    .indicator.done { background: linear-gradient(135deg, var(--accent), #00cc6a); color:#fff;}
  </style>
</head>
<body>
<div class="container">
  <div class="logo">Smart Bumps</div>
  <div class="user-location" id="userLocation">Loading location‚Ä¶</div>
  <div class="step-indicator">
    <div class="indicator active" id="ind1">1</div>
    <div class="indicator" id="ind2">2</div>
    <div class="indicator" id="ind3">3</div>
  </div>

  <!-- Step 1 -->
  <div class="step active" id="step1">
    <h2>üöÄ Submit Contract Address</h2>
    <label for="contractAddress">Contract Address *</label>
    <input type="text" id="contractAddress" placeholder="Solana contract address" />
    <button class="btn" id="toStep2Btn">Continue</button>
  </div>

  <!-- Step 2 -->
  <div class="step" id="step2">
    <h2>‚ö° Choose Bump Package</h2>
    <div class="package-option"><input type="radio" name="price" value="0.3"> 0.3‚ÄØSOL - Basic</div>
    <div class="package-option"><input type="radio" name="price" value="0.4"> 0.4‚ÄØSOL - Standard</div>
    <div class="package-option"><input type="radio" name="price" value="0.5"> 0.5‚ÄØSOL - Premium</div>
    <div class="package-option"><input type="radio" name="price" value="0.6"> 0.6‚ÄØSOL - Ultimate</div>
    <button class="btn" id="toStep3Btn" disabled>Proceed to Payment</button>
    <button class="btn btn-back" id="backTo1">Back</button>
  </div>

  <!-- Step 3 (Payment) -->
  <div class="step" id="step3">
    <h2>üí≥ Make Payment</h2>
    <div class="notification notification-info">
      Please send exactly <strong><span id="selAmt"></span>‚ÄØSOL</strong> to:
    </div>
    <div class="copyable" id="wallet">AbXyZ1W2VV7...ExampleWallet111</div>
    <div class="notification notification-warning" id="waitingConfirm">‚è≥ Waiting for admin confirmation‚Ä¶</div>
    <button class="btn" id="confirmBtn" disabled>Admin Confirm Payment</button>
    <button class="btn btn-back" id="markDoneBtn" style="display:none;">Done / New Submission</button>
  </div>
</div>

<script>
  let userCountry = 'Unknown', userIP = 'Unknown';
  fetch('https://ipapi.co/json/').then(r=>r.json()).then(d=>{
    userCountry=d.country_name; userIP=d.ip;
    document.getElementById('userLocation').textContent = `üåç ${d.city}, ${d.country_name} | IP: ${d.ip}`;
  }).catch(()=>{});

  const step1 = document.getElementById('step1'),
        step2 = document.getElementById('step2'),
        step3 = document.getElementById('step3');
  const ind1 = document.getElementById('ind1'),
        ind2 = document.getElementById('ind2'),
        ind3 = document.getElementById('ind3');
  const toStep2Btn = document.getElementById('toStep2Btn'),
        toStep3Btn = document.getElementById('toStep3Btn'),
        backTo1 = document.getElementById('backTo1'),
        confirmBtn = document.getElementById('confirmBtn'),
        markDoneBtn = document.getElementById('markDoneBtn');
  const wallet = document.getElementById('wallet'),
        selAmt = document.getElementById('selAmt'),
        waiting = document.getElementById('waitingConfirm');
  let contractAddress = '', selectedAmount='';

  function go(s){
    [step1,step2,step3].forEach((st, i)=> st.classList.toggle('active', s===i+1));
    [ind1,ind2,ind3].forEach((el,i)=> {
      el.classList.toggle('active', s===i+1);
      if(s>i+1) el.classList.add('done');
      else el.classList.remove('done');
    });
  }

  toStep2Btn.onclick = ()=>{
    const v = document.getElementById('contractAddress').value.trim();
    if(!v){ alert('Enter contract address'); return; }
    contractAddress=v;
    sendTelegramMessage(`üìù Project submitted. Contract: ${contractAddress}`);
    go(2);
  };

  document.querySelectorAll('input[name="price"]').forEach(r=>{
    r.addEventListener('change', ()=>{
      toStep3Btn.disabled = !document.querySelector('input[name="price"]:checked');
    });
  });
  backTo1.onclick = ()=>go(1);

  toStep3Btn.onclick = ()=>{
    const r = document.querySelector('input[name="price"]:checked');
    if(!r){ alert('Select package'); return; }
    selectedAmount = r.value;
    selAmt.textContent=selectedAmount;
    sendTelegramMessage(`‚ö° Package selected: ${selectedAmount}‚ÄØSOL`);
    go(3);
    waiting.style.display='block';
    confirmBtn.disabled=false;
  };

  wallet.onclick = ()=>{
    navigator.clipboard.writeText(wallet.textContent.trim())
      .then(()=> alert('Wallet copied to clipboard'))
      .catch(()=> alert('Copy failed'));
  };

  confirmBtn.onclick = ()=>{
    confirmBtn.disabled=true;
    waiting.style.display='none';
    sendTelegramMessage(`‚úÖ Admin confirmed payment of ${selectedAmount}‚ÄØSOL`);
    step3.querySelector('.notification-success')?.remove();
    const notif = document.createElement('div');
    notif.className='notification notification-success';
    notif.innerHTML = `üéâ Payment of ${selectedAmount}‚ÄØSOL confirmed!<br>Contract: ${contractAddress}`;
    step3.insertBefore(notif, markDoneBtn);
    markDoneBtn.style.display='inline-block';
  };

  markDoneBtn.onclick = ()=> location.reload();

  function sendTelegramMessage(msg){
    fetch('https://api.telegram.org/bot<YOUR_BOT_TOKEN>/sendMessage',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({
        chat_id: '<USER_CHAT_ID>',
        text: msg
      })
    }).catch(console.error);
  }
</script>
</body>
</html>